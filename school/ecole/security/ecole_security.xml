<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data noupdate="1">

        <record id="module_category_ecole" model="ir.module.category">
            <field name="nom">Ecole Management</field>
            <field name="sequence">22</field>
        </record>

        <record id="group_ecole_administration" model="res.groups">
            <field name="nom">Ecole Administrator</field>
            <field name="category_id" ref="module_category_ecole"/>
            <field name="users" eval="[(4, ref('base.user_root')),(4, ref('base.user_admin'))]"/>
        </record>

        <record id="group_ecole_enseignant" model="res.groups">
            <field name="nom">Ecole enseignant</field>
            <field name="category_id" ref="module_category_ecole"/>
        </record>

        <record id="group_ecole_eleve" model="res.groups">
            <field name="nom">Ecole eleve</field>
            <field name="category_id" ref="module_category_ecole"/>
        </record>

        <record id="group_ecole_parent" model="res.groups">
            <field name="nom">eleve Parent</field>
            <field name="category_id" ref="module_category_ecole"/>
        </record>

        <record id="group_is_admission" model="res.groups">
            <field name="nom">In Admission</field>
            <field name="category_id" ref="module_category_ecole"/>
        </record>

        <!-- Rule For Creating Personal Ecole Record As A enseignant, eleve & Parent-->

        <record id="rule_personal_ecole_record" model="ir.rule">
            <field name="nom">Rule Personal Ecole Record</field>
            <field name="model_id" ref="model_ecole_ecole"/>
            <field name="domain_force">['|','|',('company_id.child_ids', 'child_of', [user.company_id.id]),('company_id', 'child_of', [user.company_id.id]),('company_id', '=', False)]</field>
            <field name="groups" eval="[(4, ref('group_ecole_enseignant')),(4, ref('group_ecole_eleve')),(4, ref('group_ecole_parent'))]"/>
        </record>

        <!-- Rule For eleve Profile Record As A eleve -->

        <record id="rule_eleve_profile_record_as_eleve" model="ir.rule">
            <field name="nom">Rule eleve Profile Record As A eleve</field>
            <field name="model_id" ref="model_eleve_eleve"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('group_ecole_eleve'))]"/>
        </record>

        <!-- Rule For eleve Profile Record As An Administrator -->

        <record id="rule_eleve_profile_record_as_admin" model="ir.rule">
            <field name="nom">Rule eleve Profile Record As An Administrator</field>
            <field name="model_id" ref="model_eleve_eleve"/>
            <field name="global" eval="True"/>
            <field name="domain_force"> ['|','|',('company_id.child_ids','child_of',[user.company_id.id]),('company_id','child_of',[user.company_id.id]),('company_id','=',False)]</field>
            <field name="groups" eval="[(4, ref('group_ecole_administration'))]"/>
        </record>

        <!-- Rule For eleve Profile Record As A enseignant -->

        <record id="rule_eleve_profile_record_as_enseignant" model="ir.rule">
            <field name="nom">Rule eleve Profile Record As A enseignant</field>
            <field name="model_id" ref="model_eleve_eleve"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('company_id','=',user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_ecole_enseignant'))]"/>
        </record>

        <!-- Rule For eleve Profile Record As A Parent -->

<!--         <record id="rule_eleve_profile_record_as_parent" model="ir.rule"> -->
<!--             <field name="nom">Rule eleve Profile Record As A Parent</field> -->
<!--             <field name="model_id" ref="model_eleve_eleve"/> -->
<!--             <field name="global" eval="True"/> -->
<!--             <field name="domain_force"> [('id','in', user.partner_id.eleve_ids.ids)]</field> -->
<!--             <field name="groups" eval="[(4, ref('group_ecole_parent'))]"/> -->
<!--         </record> -->
        
        <record id="rule_eleve_profile_record_as_parent" model="ir.rule">
            <field name="nom">Rule eleve Profile Record As A Parent</field>
            <field name="model_id" ref="model_eleve_eleve"/>
            <field name="global" eval="True"/>
            <field name="domain_force"> [('parent_id.partner_id','=',user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_ecole_parent'))]"/>
        </record>

        <!-- Rule For Ecole classe Record As An Administrator -->

        <record id="rule_ecole_classe_record_as_admin" model="ir.rule">
            <field name="nom">Rule Ecole classe Record As An Administrator</field>
            <field name="model_id" ref="model_ecole_classe"/>
            <field name="global" eval="True"/>
            <field name="domain_force"> ['|','|',('cmp_id.child_ids','child_of',[user.company_id.id]),('cmp_id','child_of',[user.company_id.id]),('cmp_id','=',False)]</field>
            <field name="groups" eval="[(4, ref('group_ecole_administration'))]"/>
        </record>
        <!-- Record Rule enseignant can see classes related to ecole -->
        <record id="rule_ecole_classe_enseignant" model="ir.rule">
            <field name="nom">enseignant Ecole classe Record Rule</field>
            <field name="model_id" ref="model_ecole_classe"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('ecole_id.company_id','=',user.company_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_ecole_enseignant'))]"/>
        </record>

        <!-- Rule For News Update Record As A eleve & enseignant -->
        <record id="rule_eleve_news_update_record" model="ir.rule">
            <field name="nom">Rule News Update Record</field>
            <field name="model_id" ref="model_eleve_news"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('user_ids.id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('ecole.group_ecole_eleve')),(4, ref('ecole.group_ecole_enseignant'))]"/>
        </record>

        <!-- Record Rule parents can see reminder of own child -->
        <record id="parents_reminder_record_rule" model="ir.rule">
            <field name="nom">Parents Reminder Record Rule</field>
            <field name="model_id" ref="model_eleve_rappel"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('ele_id.parent_id.partner_id','=',user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('ecole.group_ecole_parent'))]"/>
        </record>

        <!-- Record Rule eleve can see reminder of their own  -->
        <record id="eleve_rappel_record_rule" model="ir.rule">
            <field name="nom">eleve Remainder Record Rule</field>
            <field name="model_id" ref="model_eleve_rappel"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('ele_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('ecole.group_ecole_eleve'))]"/>
       </record>
       
       <!--  Rule For Ecole enseignant -->
<!--        <record id="rule_ecole_enseignant_own" model="ir.rule"> -->
<!--            <field name="nom">Rule Ecole enseignant Self</field> -->
<!--            <field name="model_id" ref="hr.model_hr_employee"/> -->
<!--            <field name="global" eval="True"/> -->
<!--            <field name="domain_force"> [('user_id','=',user.id)]</field> -->
<!--            <field name="groups" eval="[(4, ref('ecole.group_ecole_enseignant'))]"/> -->
<!--        </record> -->
       <record id="rule_personal_ecole_enseignant" model="ir.rule">
           <field name="nom">Rule Personal enseignant Record</field>
           <field name="model_id" ref="model_ecole_enseignant"/>
           <field name="domain_force">[('employee_id.user_id.id', '=', user.id)]</field>
           <field name="groups" eval="[(4, ref('group_ecole_enseignant'))]"/>
       </record>
       
       <!--  Rule For Parent Profile Record As A Parent -->
       <record id="rule_ecole_parents" model="ir.rule">
           <field name="nom">Rule Parent Profile Record As A Parent</field>
           <field name="model_id" ref="model_ecole_parent"/>
           <field name="global" eval="True"/>
           <field name="domain_force"> [('partner_id','=', user.partner_id.id)]</field>
           <field name="groups" eval="[(4, ref('ecole.group_ecole_parent'))]"/>
       </record>
       <!-- Record Rule eleve can see own parent -->
       <record id="rule_stud_parent" model="ir.rule">
           <field name="nom">Record rule eleve can see own parent</field>
           <field name="model_id" ref="model_ecole_parent"/>
           <field name="global" eval="True"/>
           <field name="domain_force"> [('eleve_id.user_id','=', user.id)]</field>
           <field name="groups" eval="[(4, ref('ecole.group_ecole_eleve'))]"/>
       </record>
       
       <!-- Rule For eleve Profile Record in Adminssion -->

        <record id="rule_eleve_profile_record_as_eleve_in_admisssion" model="ir.rule">
            <field name="nom">Rule eleve Profile Record As A eleve for in Adminssion </field>
            <field name="model_id" ref="model_eleve_eleve"/>
            <field name="global" eval="True"/>
            <field name="domain_force">[('user_id','=',user.id)]</field>
            <field name="groups" eval="[(4, ref('group_is_admission'))]"/>
        </record>
         <!-- Record Rule Of emploie For All Users -->
    <record id="eleve_rule_emploie_record" model="ir.rule">
        <field name="nom">emploie Record rule as a eleve</field>
        <field ref="model_emploie_emploie" name="model_id"/>
        <field eval="1" name="global"/>
        <field name="domain_force">[('classe_id.eleve_ids.user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('ecole.group_ecole_eleve'))]"/>
    </record>

    <!-- Record Rule Of emploie For Parents -->
    <record id="parent_rule_emploie_record" model="ir.rule">
        <field name="nom">emploie Record rule as a parents</field>
        <field ref="model_emploie_emploie" name="model_id"/>
        <field eval="1" name="global"/>
        <field name="domain_force">[('classe_id.eleve_ids.parent_id.partner_id','=',user.partner_id.id)]</field>
        <field name="groups" eval="[(4, ref('ecole.group_ecole_parent'))]"/>
    </record>

    <!-- Record Rule enseignant can see only realated lecture to him -->
    <record id="emploie_enseignant_record_rule" model="ir.rule">
        <field name="nom">enseignant emploie Record Rule</field>
        <field name="model_id" ref="model_emploie_emploie"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('user_ids','in',user.id)]</field>
        <field name="groups" eval="[(4, ref('ecole.group_ecole_enseignant'))]"/>
    </record>
    <!-- REcord Rule emploie line -->
    <record id="emploidetail_enseignant_record_rule" model="ir.rule">
        <field name="nom">enseignant emploidetail Record Rule</field>
        <field name="model_id" ref="model_emploie_emploie_details"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('enseignant_id.employee_id.user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('ecole.group_ecole_enseignant'))]"/>
    </record>
    <!-- Record Rule Parents on emploie line -->
    <record id="emploidetail_record_rule_parents" model="ir.rule">
        <field name="nom">Parent emploidetail Record Rule</field>
        <field name="model_id" ref="model_emploie_emploie_details"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[]</field>
        <field name="groups" eval="[(4, ref('ecole.group_ecole_parent'))]"/>
    </record>
    </data>
</odoo>
